function getZodiac(month, day) {
    const zodiacs = [
        { sign: "염소자리", from: [1, 1], to: [1, 19] },
        { sign: "물병자리", from: [1, 20], to: [2, 18] },
        { sign: "물고기자리", from: [2, 19], to: [3, 20] },
        { sign: "양자리", from: [3, 21], to: [4, 19] },
        { sign: "황소자리", from: [4, 20], to: [5, 20] },
        { sign: "쌍둥이자리", from: [5, 21], to: [6, 21] },
        { sign: "게자리", from: [6, 22], to: [7, 22] },
        { sign: "사자자리", from: [7, 23], to: [8, 22] },
        { sign: "처녀자리", from: [8, 23], to: [9, 22] },
        { sign: "천칭자리", from: [9, 23], to: [10, 23] },
        { sign: "전갈자리", from: [10, 24], to: [11, 22] },
        { sign: "사수자리", from: [11, 23], to: [12, 24] },
        { sign: "염소자리", from: [12, 25], to: [12, 31] }
    ];
    return zodiacs.find(z =>
        (month === z.from[0] && day >= z.from[1]) ||
        (month === z.to[0] && day <= z.to[1])
    ).sign;
}

const horoscopeMessages = {
    "양자리": {
        조언: ["결단력이 필요합니다.", "과감하게 움직이세요.", "한 걸음 물러나면 답이 보여요."],
        재미: ["웃음을 참지 마세요!", "농담 하나가 분위기를 바꿔요.", "기발한 아이디어가 나올지도?"],
        운: ["행운의 숫자는 7!", "작은 것에서 기회를 잡으세요.", "우연한 만남이 복이 됩니다."],
        감성: ["감정을 솔직하게 표현하세요.", "오늘은 시 한 편이 어울려요.", "그리움을 꺼내도 좋은 날이에요."]
    },
    "황소자리": {
        조언: ["느긋하게 생각해보세요.", "현실적인 판단이 필요합니다.", "성급함은 금물이에요."],
        재미: ["편안한 시간 속에 웃음이 숨어 있어요.", "소소한 유머가 사람들을 기쁘게 해요.", "익숙한 것에서 재미를 찾아보세요."],
        운: ["금전 운이 상승 중입니다.", "실속 있는 하루가 될 거예요.", "기대하지 않은 이득이 생길 수 있어요."],
        감성: ["따뜻한 차 한 잔이 위로를 줄 거예요.", "감정을 지켜보는 시간이 필요해요.", "마음의 여유가 중요해요."]
    },
    "쌍둥이자리": {
        조언: ["유연한 사고가 빛을 발합니다.", "소통이 열쇠가 될 거예요.", "지식은 무기가 됩니다."],
        재미: ["오늘은 수다의 날!", "재미있는 영상이 기분을 바꿔줄 거예요.", "웃긴 친구가 당신을 찾을 거예요."],
        운: ["예상 밖의 연락이 찾아올 거예요.", "길을 걷다 행운을 만날 수도 있어요.", "호기심이 기회를 부릅니다."],
        감성: ["감정의 기복을 받아들이세요.", "생각이 많아지는 하루지만, 괜찮아요.", "마음의 소리에 귀 기울여 보세요."]
    },
    "게자리": {
        조언: ["감정을 소중히 여기세요.", "가족과의 시간이 힘이 됩니다.", "내면의 목소리를 들어보세요."],
        재미: ["추억을 꺼내는 것도 즐거움이에요.", "요리나 만들기에 도전해보세요.", "포근한 영화가 어울리는 날이에요."],
        운: ["집 가까운 곳에서 행운을 찾으세요.", "과거의 선택이 보답을 줍니다.", "익숙한 것이 복을 가져와요."],
        감성: ["감정적인 표현이 관계를 깊게 해요.", "누군가의 따뜻한 말이 위로가 될 거예요.", "감성적인 글을 써보는 것도 좋아요."]
    },
    "사자자리": {
        조언: ["당당하게 행동하세요.", "자신의 가치를 믿으세요.", "리더십을 발휘할 수 있는 날이에요."],
        재미: ["주목받는 순간을 즐기세요.", "스타일 변신이 재미를 줄 수 있어요.", "무대에 오른 기분을 느껴보세요."],
        운: ["행운은 대담한 사람 편이에요.", "새로운 사람과의 만남이 기대돼요.", "빛나는 순간이 다가오고 있어요."],
        감성: ["뜨거운 열정이 오늘을 이끌어요.", "마음을 표현하는 데 주저하지 마세요.", "감정도 주인처럼 다뤄야 해요."]
    },
    "처녀자리": {
        조언: ["디테일에 집중해보세요.", "작은 실수도 미리 점검해요.", "계획이 성공을 부릅니다."],
        재미: ["정리정돈이 의외로 재미있어요.", "퍼즐이나 퀴즈가 잘 맞는 날이에요.", "지적인 유머에 웃음이 나요."],
        운: ["계획한 일에서 좋은 결과가 생길 거예요.", "성실함이 행운을 이끌어요.", "수고한 만큼 보답이 따를 거예요."],
        감성: ["섬세한 감정이 빛나는 날이에요.", "작은 변화에 마음이 움직일 수 있어요.", "마음을 다스리는 법을 배워보세요."]
    },
    "천칭자리": {
        조언: ["균형을 잡는 것이 관건이에요.", "모두의 의견을 들어보세요.", "중립을 유지하는 것이 유리합니다."],
        재미: ["감각적인 예술 감상이 어울리는 날이에요.", "패션 변화가 즐거움을 줘요.", "센스 있는 말 한마디가 웃음을 줘요."],
        운: ["우아한 선택이 행운을 불러옵니다.", "사람들과의 만남 속에 기회가 있어요.", "조화로운 관계가 복을 가져다줘요."],
        감성: ["감정이 고요하게 흐르는 하루에요.", "음악과 함께 감정을 정리해보세요.", "아름다움에 감동받을 수 있어요."]
    },
    "전갈자리": {
        조언: ["직관을 믿으세요.", "비밀스러운 계획이 이득이 될 거예요.", "진실된 감정이 중요해요."],
        재미: ["추리물이나 스릴러가 잘 맞아요.", "깊이 있는 대화가 즐거움을 줘요.", "심리 게임이 흥미진진할 수 있어요."],
        운: ["감춰졌던 것이 드러나 행운이 됩니다.", "숨겨진 기회가 모습을 드러낼 거예요.", "생각보다 가까운 곳에 답이 있어요."],
        감성: ["감정을 억누르지 말고 표현해보세요.", "깊은 내면을 탐색하는 날이에요.", "마음을 터놓을 사람이 필요해요."]
    },
    "사수자리": {
        조언: ["도전을 두려워하지 마세요.", "넓은 시야가 필요해요.", "이동이 좋은 변화를 가져올 수 있어요."],
        재미: ["즉흥 여행이나 산책이 즐거워요.", "새로운 문화 체험에 도전해보세요.", "자유로운 활동이 에너지를 줘요."],
        운: ["모험 속에 기회가 숨어 있어요.", "뜻밖의 제안이 행운을 가져다줄 수 있어요.", "자유로운 움직임이 행운을 부릅니다."],
        감성: ["마음이 넓어지는 하루예요.", "감정의 거리를 좁혀보세요.", "경험이 감정을 더 깊게 만들어줘요."]
    },
    "염소자리": {
        조언: ["책임감을 잊지 마세요.", "현실적인 판단이 중요해요.", "꾸준한 노력이 열매를 맺어요."],
        재미: ["일 속에서 보람을 찾는 재미가 있어요.", "차분한 독서가 어울리는 날이에요.", "목표를 세우는 것도 재미가 될 수 있어요."],
        운: ["노력의 결과가 나타나기 시작합니다.", "성실함이 복을 부릅니다.", "계획이 당신을 도와줄 거예요."],
        감성: ["담담한 감정 속에서도 따뜻함을 느낄 수 있어요.", "묵묵한 하루가 위로가 됩니다.", "마음의 중심을 잡는 시간이 필요해요."]
    },
    "물병자리": {
        조언: ["창의력에 자신감을 가지세요.", "틀에 얽매이지 마세요.", "당신만의 길이 옳습니다."],
        재미: ["예상 못한 재미가 기다리고 있어요!", "가벼운 장난이 즐거움을 줘요.", "오늘은 유쾌한 사람이 되어보세요."],
        운: ["행운은 가까운 곳에 있어요.", "놓치지 마세요, 기회는 순간입니다.", "우연한 제안이 행운으로!"],
        감성: ["자유로운 감정을 받아들이세요.", "음악 한 곡이 마음을 울릴지도 몰라요.", "감정의 흐름을 따라가보세요."]
    },
    "물고기자리": {
        조언: ["직감을 믿으세요.", "감정에 솔직해지세요.", "상상력이 큰 힘이 됩니다."],
        재미: ["몽환적인 분위기가 잘 어울려요.", "영화를 보며 몰입해보세요.", "꿈을 기록해보는 것도 좋아요."],
        운: ["꿈에서 힌트를 얻을 수 있어요.", "감성이 행운을 부릅니다.", "우연한 만남이 의미를 가질 수 있어요."],
        감성: ["감성적인 대화가 큰 힘이 돼요.", "슬픔도 사랑도 있는 그대로 느껴보세요.", "감정에 이름을 붙여보세요."]
    }
};

function getDailyMessage(messages) {
    const day = new Date().getDate();
    const pick = category => messages[category][day % messages[category].length];
    return {
        조언: pick("조언"),
        재미: pick("재미"),
        운: pick("운"),
        감성: pick("감성")
    };
}

function showHoroscope(name, birth) {
    const date = new Date(birth);
    const zodiac = getZodiac(date.getMonth() + 1, date.getDate());
    const messages = getDailyMessage(horoscopeMessages[zodiac]);

    document.getElementById("inputSection").style.display = "none";
    document.getElementById("resultSection").style.display = "block";
    document.getElementById("greeting").textContent = `${name}님의 오늘의 운세는...`;
    document.getElementById("horoscope").innerHTML =
        `<strong>[${zodiac}]</strong><br>
        🧭 <strong>조언:</strong> ${messages.조언}<br>
        🎉 <strong>재미:</strong> ${messages.재미}<br>
        🍀 <strong>운:</strong> ${messages.운}<br>
        💖 <strong>감성:</strong> ${messages.감성}`;
}

function saveAndShowHoroscope() {
    const name = document.getElementById("nameInput").value;
    const birth = document.getElementById("birthInput").value;
    if (!name || !birth) return alert("이름과 생년월일을 모두 입력해주세요.");
    localStorage.setItem("userName", name);
    localStorage.setItem("birthDate", birth);
    showHoroscope(name, birth);
}

window.onload = () => {
    const name = localStorage.getItem("userName");
    const birth = localStorage.getItem("birthDate");
    if (name && birth) {
        showHoroscope(name, birth);
    }
};
